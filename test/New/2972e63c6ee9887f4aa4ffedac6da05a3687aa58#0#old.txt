[{"block": 0, "type": "markdown", "linesLength": 3, "startIndex": 0, "lines": ["# Introduction: Understanding Logistic Regression Outputs\n", "\n", "The purpose of this notebook is to understand the outputs of logistic regression: logits, probabilities, odds, and classifications. Logistic regression is simple because it's a linear classification model, but that doesn't always mean something is simple to understand! "]}, {"block": 1, "type": "code", "linesLength": 25, "startIndex": 3, "lines": ["import pandas as pd\n", "import numpy as np\n", "\n", "%load_ext autoreload\n", "%autoreload 2\n", "\n", "import sys\n", "sys.path.append('../..')\n", "\n", "# Options for pandas\n", "pd.options.display.max_columns = 20\n", "pd.options.display.max_rows = 10\n", "\n", "# Display all cell outputs\n", "from IPython.core.interactiveshell import InteractiveShell\n", "InteractiveShell.ast_node_interactivity = 'all'\n", "\n", "import plotly.plotly as py\n", "import plotly.graph_objs as go\n", "from plotly.offline import iplot, init_notebook_mode\n", "init_notebook_mode(connected=True)\n", "\n", "import cufflinks as cf\n", "cf.go_offline(connected=True)\n", "cf.set_config_file(theme='pearl')\n"]}, {"block": 2, "type": "code", "linesLength": 15, "startIndex": 28, "lines": ["def logits_to_probs(logits):\n", "    return 1 / (1 + np.exp(-logits))\n", "\n", "def logits_to_odds(logits):\n", "    return np.exp(logits)\n", "\n", "def probs_to_odds(probs):\n", "    return probs / (1 - probs)\n", "\n", "def odds_to_probs(odds):\n", "    return odds / (1 + odds)\n", "\n", "logits_to_probs(1)\n", "logits_to_probs(2) \n", "logits_to_probs(4)"]}, {"block": 3, "type": "code", "linesLength": 8, "startIndex": 43, "lines": ["df = pd.DataFrame({'logits': np.arange(-10, 10, 0.01)})\n", "df['odds'] = logits_to_odds(df['logits'])\n", "\n", "df['probs'] = odds_to_probs(df['odds'])\n", "df['class'] = df['probs'].round()\n", "\n", "df.iplot(kind='scatter', x='logits', y='probs', secondary_y='odds', \n", "         xTitle='logits', yTitle='Probability', secondary_y_title='Odds')"]}, {"block": 4, "type": "code", "linesLength": 1, "startIndex": 51, "lines": ["df.iplot(x='logits', y='class', xTitle='logits', yTitle='Class')"]}, {"block": 5, "type": "code", "linesLength": 11, "startIndex": 52, "lines": ["coef0 = -0.5 \n", "coef1 = 0.2\n", "\n", "xrange = np.arange(-2, 5, 0.01)\n", "logits = coef0 + coef1 * xrange\n", "odds = logits_to_odds(logits)\n", "probs = logits_to_probs(logits)\n", "classes = np.round(probs)\n", "\n", "df = pd.DataFrame(dict(logits=logits, odds=odds, probs=probs, classes=classes)).set_index(xrange)\n", "df.iplot()"]}, {"block": 6, "type": "code", "linesLength": 1, "startIndex": 63, "lines": ["probs_to_odds(logits_to_probs(0.5))"]}, {"block": 7, "type": "code", "linesLength": 1, "startIndex": 64, "lines": ["logits_to_odds(0.5)"]}, {"block": 8, "type": "code", "linesLength": 1, "startIndex": 65, "lines": ["odds_to_probs(10) - odds_to_probs(10.15)"]}, {"block": 9, "type": "code", "linesLength": 1, "startIndex": 66, "lines": ["odds_to_probs(1.15) - odds_to_probs(1.3)"]}, {"block": 10, "type": "code", "linesLength": 1, "startIndex": 67, "lines": ["probs_to_odds(0.1)"]}, {"block": 11, "type": "code", "linesLength": 0, "startIndex": 68, "lines": []}, {"block": 12, "type": "code", "linesLength": 3, "startIndex": 68, "lines": ["probs_to_odds(logits_to_probs(1))\n", "logits_to_probs(2) \n", "logits_to_probs(4)"]}, {"block": 13, "type": "code", "linesLength": 2, "startIndex": 71, "lines": ["logits_to_probs(9)\n", "logits_to_probs(10) "]}, {"block": 14, "type": "code", "linesLength": 1, "startIndex": 73, "lines": ["np.exp(1.5)"]}, {"block": 15, "type": "code", "linesLength": 0, "startIndex": 74, "lines": []}, {"block": 16, "type": "code", "linesLength": 2, "startIndex": 74, "lines": ["np.exp(1) / np.exp(0)\n", "np.exp(3) / np.exp(2)"]}, {"block": 17, "type": "code", "linesLength": 1, "startIndex": 76, "lines": ["np.exp(1.5)"]}, {"block": 18, "type": "code", "linesLength": 0, "startIndex": 77, "lines": []}]