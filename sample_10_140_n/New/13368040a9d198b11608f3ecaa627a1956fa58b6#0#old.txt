[{"block": 0, "type": "markdown", "linesLength": 3, "startIndex": 0, "lines": ["# City Level Data\n", "\n", "https://nccd.cdc.gov/500_Cities/rdPage.aspx?rdReport=DPH_500_Cities.ComparisonReport&Locations=1759000,2507000&rdRequestForwarding=Form"]}, {"block": 1, "type": "code", "linesLength": 5, "startIndex": 3, "lines": ["import numpy as np\n", "import matplotlib.pyplot as plt\n", "%matplotlib inline\n", "plt.style.use('seaborn-dark')\n", "\n"]}, {"block": 2, "type": "code", "linesLength": 20, "startIndex": 8, "lines": ["b_p = 0.164\n", "b_ci = [0.161, 0.166]\n", "b_pop = 617594\n", "b_n = (1 - 0.165) * b_pop\n", "\n", "\n", "p_p = 0.199\n", "p_ci = [0.194, 0.203]\n", "p_pop = 115105\n", "p_n = (1 - 0.251) * p_pop \n", "\n", "z_95 = 1.96\n", "\n", "n = 30\n", "\n", "b_sigma = ((b_ci[1] - b_p) / z_95) * 1\n", "p_sigma = ((p_ci[1] - p_p) / z_95) * 1\n", "\n", "print(f'Standard deviation for Boston: {b_sigma}')\n", "print(f'Standard deviation for Peoria: {p_sigma}')"]}, {"block": 3, "type": "code", "linesLength": 5, "startIndex": 28, "lines": ["b_se = np.sqrt((b_p * (1 - b_p)) / b_n)\n", "p_se = np.sqrt((p_p * (1 - p_p)) / p_n)\n", "\n", "se_diff = np.sqrt(np.square(b_se) + np.square(p_se))\n", "(b_p - p_p) + 1.96 * se_diff"]}, {"block": 4, "type": "code", "linesLength": 1, "startIndex": 33, "lines": ["(b_p - p_p) - 1.96 * se_diff"]}, {"block": 5, "type": "code", "linesLength": 4, "startIndex": 34, "lines": ["p_dist = np.random.normal(loc = p_p, scale = p_sigma, size = int(p_n))\n", "b_dist = np.random.normal(loc = b_p, scale = b_sigma, size = int(b_n))\n", "b = np.repeat('boston', repeats = len(b_dist))\n", "p = np.repeat('peoria', repeats = len(p_dist))"]}, {"block": 6, "type": "code", "linesLength": 1, "startIndex": 38, "lines": ["scipy.stats.norm.interval(0.95, loc = b_p, scale = b_sigma)"]}, {"block": 7, "type": "code", "linesLength": 1, "startIndex": 39, "lines": ["scipy.stats.norm.interval(0.95, loc = p_p, scale = p_sigma)"]}, {"block": 8, "type": "code", "linesLength": 4, "startIndex": 40, "lines": ["import pandas as pd\n", "dist_df = pd.DataFrame({'s': list(b_dist) + list(p_dist)})\n", "dist_df['city'] = list(b) + list(p)\n", "dist_df.groupby('city').describe()"]}, {"block": 9, "type": "code", "linesLength": 2, "startIndex": 44, "lines": ["import matplotlib\n", "matplotlib.get_configdir()"]}, {"block": 10, "type": "code", "linesLength": 1, "startIndex": 46, "lines": ["print(plt.rcParams['axes.prop_cycle'].by_key()['color'])"]}, {"block": 11, "type": "code", "linesLength": 9, "startIndex": 47, "lines": ["import seaborn as sns\n", "plt.figure(figsize = (10, 8))\n", "p1 = sns.kdeplot(p_dist, label = 'Peoria')\n", "p2 = sns.kdeplot(b_dist, label = 'Boston')\n", "plt.legend(); plt.title('Distribution of Percentages');\n", "x = plt.gca()\n", "plt.vlines([b_p, p_p], ymin = 0, ymax = 400, colors = ['#D4CA3A', '#00BEFF']);\n", "plt.hlines([25], xmin = b_ci[0], xmax = b_ci[1], colors = ['#D4CA3A'], linestyles = '--')\n", "plt.hlines([25], xmin = p_ci[0], xmax = p_ci[1], colors = ['#00BEFF'], linestyles = '--');"]}, {"block": 12, "type": "code", "linesLength": 4, "startIndex": 56, "lines": ["plt.figure(figsize = (10, 8))\n", "sns.boxplot(x = 's', y = 'city', data = dist_df);\n", "plt.xlabel('Percentage of Smokers');\n", "plt.title('Boxplot of Smoking Rates');"]}, {"block": 13, "type": "code", "linesLength": 4, "startIndex": 60, "lines": ["plt.figure(figsize = (10, 8))\n", "sns.violinplot(y = 's', x = 'city', data = dist_df);\n", "plt.ylabel('Percentage of Smokers');\n", "plt.title('Violinplot of Smoking Rates');"]}, {"block": 14, "type": "code", "linesLength": 0, "startIndex": 64, "lines": []}]