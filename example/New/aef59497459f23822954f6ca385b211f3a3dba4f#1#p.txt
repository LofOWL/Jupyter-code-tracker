[{"block": 0, "type": "markdown", "linesLength": 5, "startIndex": 0, "lines": ["<style>div.title-slide {    width: 100%;    display: flex;    flex-direction: row;            /* default value; can be omitted */    flex-wrap: nowrap;              /* default value; can be omitted */    justify-content: space-between;}</style><div class=\"title-slide\">\n", "<span style=\"float:left;\">Licence CC BY-NC-ND</span>\n", "<span>Thierry Parmentelat &amp; Arnaud Legout</span>\n", "<span><img src=\"media/both-logos-small-alpha.png\" style=\"display:inline\" /></span>\n", "</div>"]}, {"block": 1, "type": "markdown", "linesLength": 1, "startIndex": 5, "lines": ["# Les outils de base sur les strings"]}, {"block": 2, "type": "markdown", "linesLength": 1, "startIndex": 6, "lines": ["## Compl\u00e9ment - niveau interm\u00e9diaire"]}, {"block": 3, "type": "markdown", "linesLength": 1, "startIndex": 7, "lines": ["### Lire la documentation"]}, {"block": 4, "type": "markdown", "linesLength": 1, "startIndex": 8, "lines": ["M\u00eame apr\u00e8s des ann\u00e9es de pratique, il est difficile de se souvenir de toutes les m\u00e9thodes travaillant sur les cha\u00eenes de caract\u00e8res. Aussi il est toujours utile de recourir \u00e0 la documentation embarqu\u00e9e"]}, {"block": 5, "type": "code", "linesLength": 1, "startIndex": 9, "lines": ["help(str)"]}, {"block": 6, "type": "markdown", "linesLength": 1, "startIndex": 10, "lines": ["Nous allons tenter ici de citer les m\u00e9thodes les plus utilis\u00e9es. Nous n'avons le temps que de les utiliser de mani\u00e8re tr\u00e8s simple, mais bien souvent il est possible de passer en param\u00e8tre des options permettant de ne travailler que sur une sous-cha\u00eene, ou sur la premi\u00e8re ou derni\u00e8re occurrence d'une sous-cha\u00eene. Nous vous renvoyons \u00e0 la documentation pour obtenir toutes les pr\u00e9cisions utiles."]}, {"block": 7, "type": "markdown", "linesLength": 1, "startIndex": 11, "lines": ["### D\u00e9coupage - assemblage : `split` et `join`"]}, {"block": 8, "type": "markdown", "linesLength": 1, "startIndex": 12, "lines": ["Les m\u00e9thodes `split` et `join` permettent de d\u00e9couper une chaine selon un s\u00e9parateur pour obtenir une liste, et \u00e0 l'inverse de reconstruire une cha\u00eene \u00e0 partir d'une liste."]}, {"block": 9, "type": "markdown", "linesLength": 1, "startIndex": 13, "lines": ["`split` permet donc de d\u00e9couper"]}, {"block": 10, "type": "code", "linesLength": 1, "startIndex": 14, "lines": ["'abc=:=def=:=ghi=:=jkl'.split('=:=')"]}, {"block": 11, "type": "markdown", "linesLength": 1, "startIndex": 15, "lines": ["Et \u00e0 l'inverse"]}, {"block": 12, "type": "code", "linesLength": 1, "startIndex": 16, "lines": ["\"=:=\".join(['abc', 'def', 'ghi', 'jkl'])"]}, {"block": 13, "type": "markdown", "linesLength": 1, "startIndex": 17, "lines": ["Attention toutefois si le s\u00e9parateur est un terminateur, la liste r\u00e9sultat contient alors une derni\u00e8re cha\u00eene vide. En pratique, on utilisera la m\u00e9thode `strip`, que nous allons voir ci-dessous, avant la m\u00e9thode `split` pour \u00e9viter ce probl\u00e8me. "]}, {"block": 14, "type": "code", "linesLength": 1, "startIndex": 18, "lines": ["'abc;def;ghi;jkl;'.split(';')"]}, {"block": 15, "type": "markdown", "linesLength": 1, "startIndex": 19, "lines": ["Qui s'inverse correctement cependant"]}, {"block": 16, "type": "code", "linesLength": 1, "startIndex": 20, "lines": ["\";\".join(['abc', 'def', 'ghi', 'jkl', ''])"]}, {"block": 17, "type": "markdown", "linesLength": 1, "startIndex": 21, "lines": ["### Remplacements : `replace`"]}, {"block": 18, "type": "markdown", "linesLength": 1, "startIndex": 22, "lines": ["`replace` est tr\u00e8s pratique pour remplacer une sous-cha\u00eene par une autre, avec une limite \u00e9ventuelle sur le nombre de remplacements"]}, {"block": 19, "type": "code", "linesLength": 1, "startIndex": 23, "lines": ["\"abcdefabcdefabcdef\".replace(\"abc\", \"zoo\")"]}, {"block": 20, "type": "code", "linesLength": 1, "startIndex": 24, "lines": ["\"abcdefabcdefabcdef\".replace(\"abc\", \"zoo\", 2)"]}, {"block": 21, "type": "markdown", "linesLength": 1, "startIndex": 25, "lines": ["Plusieurs appels \u00e0 `replace` peuvent \u00eatre cha\u00een\u00e9s comme ceci"]}, {"block": 22, "type": "code", "linesLength": 1, "startIndex": 26, "lines": ["\"les [x] qui disent [y]\".replace(\"[x]\", \"chevaliers\").replace(\"[y]\", \"Ni\")"]}, {"block": 23, "type": "markdown", "linesLength": 1, "startIndex": 27, "lines": ["### Nettoyage : `strip`"]}, {"block": 24, "type": "markdown", "linesLength": 1, "startIndex": 28, "lines": ["On pourrait par exemple utiliser `replace` pour enlever les espaces dans une cha\u00eene, ce qui peut \u00eatre utile pour \"nettoyer\" comme ceci"]}, {"block": 25, "type": "code", "linesLength": 1, "startIndex": 29, "lines": ["\" abc:def:ghi \".replace(\" \", \"\")"]}, {"block": 26, "type": "markdown", "linesLength": 1, "startIndex": 30, "lines": ["Toutefois bien souvent on pr\u00e9f\u00e8re utiliser `strip` qui ne s'occupe que du d\u00e9but et de la fin de la cha\u00eene, et g\u00e8re aussi les tabulations et autres retour \u00e0 la ligne"]}, {"block": 27, "type": "code", "linesLength": 1, "startIndex": 31, "lines": ["\" \\tune chaine avec des trucs qui d\u00e9passent \\n\".strip()"]}, {"block": 28, "type": "markdown", "linesLength": 1, "startIndex": 32, "lines": ["On peut appliquer `strip` avant `split` pour \u00e9viter le probl\u00e8me du dernier \u00e9l\u00e9ment vide."]}, {"block": 29, "type": "code", "linesLength": 1, "startIndex": 33, "lines": ["'abc;def;ghi;jkl;'.strip(';').split(';')"]}, {"block": 30, "type": "markdown", "linesLength": 1, "startIndex": 34, "lines": ["### Rechercher une sous-cha\u00eene"]}, {"block": 31, "type": "markdown", "linesLength": 1, "startIndex": 35, "lines": ["Plusieurs outils permettent de chercher une sous-cha\u00eene. Il existe `find` qui renvoie le plus petit index o\u00f9 on trouve la sous-cha\u00eene"]}, {"block": 32, "type": "code", "linesLength": 2, "startIndex": 36, "lines": ["# l'indice du d\u00e9but de la premi\u00e8re occurrence\n", "\"abcdefcdefghefghijk\".find(\"def\")"]}, {"block": 33, "type": "code", "linesLength": 2, "startIndex": 38, "lines": ["# ou -1 si la chaine n'est pas pr\u00e9sente:\n", "\"abcdefcdefghefghijk\".find(\"zoo\")"]}, {"block": 34, "type": "markdown", "linesLength": 1, "startIndex": 40, "lines": ["`rfind` fonctionne comme `find` mais en partant de la fin de la cha\u00eene"]}, {"block": 35, "type": "code", "linesLength": 2, "startIndex": 41, "lines": ["# en partant de la fin\n", "\"abcdefcdefghefghijk\".rfind(\"fgh\")"]}, {"block": 36, "type": "code", "linesLength": 3, "startIndex": 43, "lines": ["# notez que le r\u00e9sultat correspond\n", "# tout de m\u00eame toujours au d\u00e9but de la chaine\n", "\"abcdefcdefghefghijk\"[13]"]}, {"block": 37, "type": "markdown", "linesLength": 1, "startIndex": 46, "lines": ["La m\u00e9thode `index` se comporte comme `find`, mais en cas d'absence elle l\u00e8ve une **exception** (nous verrons ce concept plus tard) plut\u00f4t que de renvoyer `-1`"]}, {"block": 38, "type": "code", "linesLength": 1, "startIndex": 47, "lines": ["\"abcdefcdefghefghijk\".index(\"def\")"]}, {"block": 39, "type": "code", "linesLength": 4, "startIndex": 48, "lines": ["try:\n", "    \"abcdefcdefghefghijk\".index(\"zoo\")\n", "except Exception as e:\n", "    print(\"OOPS\", type(e), e)"]}, {"block": 40, "type": "markdown", "linesLength": 1, "startIndex": 52, "lines": ["Mais le plus simple pour chercher si une sous-cha\u00eene est dans une autre cha\u00eene est d'utiliser l'instruction `in` sur laquelle nous reviendrons lorsque nous parlerons des s\u00e9quences. "]}, {"block": 41, "type": "code", "linesLength": 1, "startIndex": 53, "lines": ["\"def\" in \"abcdefcdefghefghijk\""]}, {"block": 42, "type": "markdown", "linesLength": 1, "startIndex": 54, "lines": ["La m\u00e9thode `count` compte le nombre d'occurrences d'une sous-cha\u00eene"]}, {"block": 43, "type": "code", "linesLength": 1, "startIndex": 55, "lines": ["\"abcdefcdefghefghijk\".count(\"ef\")"]}, {"block": 44, "type": "markdown", "linesLength": 1, "startIndex": 56, "lines": ["Signalons enfin les m\u00e9thodes de commodit\u00e9 suivantes"]}, {"block": 45, "type": "code", "linesLength": 1, "startIndex": 57, "lines": ["\"abcdefcdefghefghijk\".startswith(\"abcd\")"]}, {"block": 46, "type": "code", "linesLength": 1, "startIndex": 58, "lines": ["\"abcdefcdefghefghijk\".endswith(\"ghijk\")"]}, {"block": 47, "type": "markdown", "linesLength": 1, "startIndex": 59, "lines": ["S'agissant des deux derni\u00e8res, remarquons que"]}, {"block": 48, "type": "markdown", "linesLength": 3, "startIndex": 60, "lines": ["`chaine.startswith(sous_chaine)` $\\Longleftrightarrow$ `chaine.find(sous_chaine) == 0`\n", "\n", "`chaine.endswith(sous_chaine)` $\\Longleftrightarrow$ `chaine.rfind(sous_chaine) == (len(chaine)-len(sous_chaine))`"]}, {"block": 49, "type": "markdown", "linesLength": 1, "startIndex": 63, "lines": ["On remarque ici la sup\u00e9riorit\u00e9 en terme d'expressivit\u00e9 des m\u00e9thodes pythoniques `startswith` et `endswith`."]}, {"block": 50, "type": "markdown", "linesLength": 1, "startIndex": 64, "lines": ["### Capitalisation"]}, {"block": 51, "type": "markdown", "linesLength": 1, "startIndex": 65, "lines": ["Voici pour conclure quelques m\u00e9thodes utiles qui parlent d'elles-m\u00eames."]}, {"block": 52, "type": "code", "linesLength": 1, "startIndex": 66, "lines": ["\"monty PYTHON\".upper()"]}, {"block": 53, "type": "code", "linesLength": 1, "startIndex": 67, "lines": ["\"monty PYTHON\".lower()"]}, {"block": 54, "type": "code", "linesLength": 1, "startIndex": 68, "lines": ["\"monty PYTHON\".swapcase()"]}, {"block": 55, "type": "code", "linesLength": 1, "startIndex": 69, "lines": ["\"monty PYTHON\".capitalize()"]}, {"block": 56, "type": "code", "linesLength": 1, "startIndex": 70, "lines": ["\"monty PYTHON\".title()"]}, {"block": 57, "type": "markdown", "linesLength": 1, "startIndex": 71, "lines": ["### Pour en savoir plus"]}, {"block": 58, "type": "markdown", "linesLength": 1, "startIndex": 72, "lines": ["Tous ces outils sont [document\u00e9s en d\u00e9tail ici (en anglais)](https://docs.python.org/3/library/stdtypes.html#string-methods)"]}]