[{"block": 0, "type": "markdown", "linesLength": 5, "startIndex": 0, "lines": ["<style>div.title-slide {    width: 100%;    display: flex;    flex-direction: row;            /* default value; can be omitted */    flex-wrap: nowrap;              /* default value; can be omitted */    justify-content: space-between;}</style><div class=\"title-slide\">\n", "<span style=\"float:left;\">Licence CC BY-NC-ND</span>\n", "<span>Thierry Parmentelat &amp; Arnaud Legout</span>\n", "<span><img src=\"media/both-logos-small-alpha.png\" style=\"display:inline\" /></span>\n", "</div>"]}, {"block": 1, "type": "markdown", "linesLength": 1, "startIndex": 5, "lines": ["# Essayez vous-m\u00eame"]}, {"block": 2, "type": "markdown", "linesLength": 1, "startIndex": 6, "lines": ["## Compl\u00e9ment - niveau avanc\u00e9"]}, {"block": 3, "type": "markdown", "linesLength": 1, "startIndex": 7, "lines": ["Pour des raisons techniques, il ne nous est pas possible de mettre en ligne un notebook qui vous permette de reproduire les exemples de la vid\u00e9o."]}, {"block": 4, "type": "markdown", "linesLength": 1, "startIndex": 8, "lines": ["C'est pourquoi, si vous \u00eates int\u00e9ress\u00e9s \u00e0 reproduire vous-m\u00eame les exp\u00e9riences de la vid\u00e9o - \u00e0 savoir, aller chercher plusieurs URLs de mani\u00e8re s\u00e9quentielle ou en parall\u00e8le - [vous pouvez t\u00e9l\u00e9charger le code fourni \u00e0 ce lien](data/async_http.py)."]}, {"block": 5, "type": "markdown", "linesLength": 7, "startIndex": 9, "lines": ["Il s'agit d'un simple script, qui reprend les 3 approches de la vid\u00e9o\u00a0:\n", "\n", "* acc\u00e8s en s\u00e9quence\n", "* acc\u00e8s asynchrnoes avec `fetch`\n", "* acc\u00e8s asynchrnoes avec `fetch2`\n", "\n", "\u00c0 part pour l'appel \u00e0 `sys.stdout.flush()`, ce code est rigoureusement identique \u00e0 celui utilis\u00e9 dans la vid\u00e9o. On doit faire ici cet appel \u00e0 `flush()` dans le mode avec `fetch2` car sinon les sorties de notre script sont bufferis\u00e9es et apparaissent toutes ensemble \u00e0 la fin du programme."]}, {"block": 6, "type": "markdown", "linesLength": 1, "startIndex": 16, "lines": ["Voici son mode d'emploi\u00a0:"]}, {"block": 7, "type": "markdown", "linesLength": 12, "startIndex": 17, "lines": ["```\n", "$ python3 async_http.py --help\n", "usage: async_http.py [-h] [-s] [-d] [urls [urls ...]]\n", "\n", "positional arguments:\n", "  urls              URL's to be fetched\n", "\n", "optional arguments:\n", "  -h, --help        show this help message and exit\n", "  -s, --sequential  run sequentially\n", "  -d, --details     show details of lines as they show up (using fetch2)\n", "```"]}, {"block": 8, "type": "markdown", "linesLength": 1, "startIndex": 29, "lines": ["Et voici les chiffres que j'obtiens lorsque je l'utilise dans une configuration r\u00e9seau plus stable que dans la vid\u00e9o (qui donne pour cette raison montre un r\u00e9sultat un peu d\u00e9cevant)\u00a0:"]}, {"block": 9, "type": "markdown", "linesLength": 9, "startIndex": 30, "lines": ["```\n", "$ python3 async_http.py -s\n", "Running sequential mode on 4 URLs\n", "http://www.irs.gov/pub/irs-pdf/f1040.pdf returned 179940 chars\n", "http://www.irs.gov/pub/irs-pdf/f1040ez.pdf returned 113242 chars\n", "http://www.irs.gov/pub/irs-pdf/f1040es.pdf returned 395201 chars\n", "http://www.irs.gov/pub/irs-pdf/f1040sb.pdf returned 73189 chars\n", "duration = 9.80829906463623s\n", "```"]}, {"block": 10, "type": "markdown", "linesLength": 17, "startIndex": 39, "lines": ["```\n", "$ python3 async_http.py\n", "Running simple mode (fetch) on 4 URLs\n", "fetching http://www.irs.gov/pub/irs-pdf/f1040.pdf\n", "fetching http://www.irs.gov/pub/irs-pdf/f1040sb.pdf\n", "fetching http://www.irs.gov/pub/irs-pdf/f1040es.pdf\n", "fetching http://www.irs.gov/pub/irs-pdf/f1040ez.pdf\n", "http://www.irs.gov/pub/irs-pdf/f1040.pdf response status 200\n", "http://www.irs.gov/pub/irs-pdf/f1040ez.pdf response status 200\n", "http://www.irs.gov/pub/irs-pdf/f1040sb.pdf response status 200\n", "http://www.irs.gov/pub/irs-pdf/f1040es.pdf response status 200\n", "http://www.irs.gov/pub/irs-pdf/f1040sb.pdf returned 75864 bytes\n", "http://www.irs.gov/pub/irs-pdf/f1040.pdf returned 186928 bytes\n", "http://www.irs.gov/pub/irs-pdf/f1040ez.pdf returned 117807 bytes\n", "http://www.irs.gov/pub/irs-pdf/f1040es.pdf returned 409193 bytes\n", "duration = 2.211031913757324s\n", "```"]}, {"block": 11, "type": "markdown", "linesLength": 3, "startIndex": 56, "lines": ["N'h\u00e9sitez pas \u00e0 utiliser ceci comme base pour exp\u00e9rimenter.\n", "\n", "Nous verrons en fin de semaine un autre exemple qui cette fois illustrera l'interaction avec les sous-processus."]}]