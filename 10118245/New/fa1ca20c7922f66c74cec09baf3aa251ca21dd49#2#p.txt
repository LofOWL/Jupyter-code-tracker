[{"block": 0, "type": "markdown", "linesLength": 5, "startIndex": 0, "lines": ["<style>div.title-slide {    width: 100%;    display: flex;    flex-direction: row;            /* default value; can be omitted */    flex-wrap: nowrap;              /* default value; can be omitted */    justify-content: space-between;}</style><div class=\"title-slide\">\n", "<span style=\"float:left;\">Licence CC BY-NC-ND</span>\n", "<span>Thierry Parmentelat &amp; Arnaud Legout</span>\n", "<span><img src=\"media/both-logos-small-alpha.png\" style=\"display:inline\" /></span>\n", "</div>"]}, {"block": 1, "type": "markdown", "linesLength": 1, "startIndex": 5, "lines": ["# La ligne *shebang*"]}, {"block": 2, "type": "markdown", "linesLength": 3, "startIndex": 6, "lines": ["```python\n", "#!/usr/bin/env python3\n", "```"]}, {"block": 3, "type": "markdown", "linesLength": 1, "startIndex": 9, "lines": ["## Compl\u00e9ment - niveau avanc\u00e9"]}, {"block": 4, "type": "markdown", "linesLength": 1, "startIndex": 10, "lines": ["Ce compl\u00e9ment est uniquement valable pour macOS et Linux."]}, {"block": 5, "type": "markdown", "linesLength": 1, "startIndex": 11, "lines": ["### Le besoin"]}, {"block": 6, "type": "markdown", "linesLength": 1, "startIndex": 12, "lines": ["Nous avons vu dans la vid\u00e9o que, pour lancer un programme Python, on fait depuis le terminal\u00a0:"]}, {"block": 7, "type": "markdown", "linesLength": 3, "startIndex": 13, "lines": ["```python\n", "$ python3 mon_module.py\n", "```"]}, {"block": 8, "type": "markdown", "linesLength": 1, "startIndex": 16, "lines": ["Lorsqu'il s'agit d'un programme que l'on utilise fr\u00e9quemment, on n'est pas forc\u00e9ment dans le r\u00e9pertoire o\u00f9 se trouve le programme Python. Aussi, dans ce cas, on peut utiliser un chemin \"absolu\", c'est-\u00e0-dire \u00e0 partir de la racine des noms de fichiers, comme par exemple\u00a0:"]}, {"block": 9, "type": "markdown", "linesLength": 3, "startIndex": 17, "lines": ["```python\n", "$ python3 /le/chemin/jusqu/a/mon_module.py\n", "```"]}, {"block": 10, "type": "markdown", "linesLength": 1, "startIndex": 20, "lines": ["Sauf que c'est assez malcommode, et cela devient vite p\u00e9nible \u00e0 la longue."]}, {"block": 11, "type": "markdown", "linesLength": 1, "startIndex": 21, "lines": ["### La solution"]}, {"block": 12, "type": "markdown", "linesLength": 1, "startIndex": 22, "lines": ["Sur Linux et macOS, il existe une astuce utile pour simplifier cela. Voyons comment s'y prendre, avec par exemple le programme `fibonacci.py` que vous pouvez [t\u00e9l\u00e9charger ici](data/fibonacci.py) (nous avons vu ce code en d\u00e9tail dans les deux compl\u00e9ments pr\u00e9c\u00e9dents). Commencez par sauver ce code sur votre ordinateur dans un fichier qui s'appelle, bien entendu, `fibonacci.py`."]}, {"block": 13, "type": "markdown", "linesLength": 1, "startIndex": 23, "lines": ["On commence par \u00e9diter le tout d\u00e9but du fichier pour lui ajouter une **premi\u00e8re ligne**\u00a0:"]}, {"block": 14, "type": "markdown", "linesLength": 6, "startIndex": 24, "lines": ["```python\n", "#!/usr/bin/env python3\n", "\n", "## La suite de Fibonacci (Suite)\n", "...etc...\n", "```"]}, {"block": 15, "type": "markdown", "linesLength": 1, "startIndex": 30, "lines": ["Cette premi\u00e8re ligne s'appelle un [Shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29) dans le jargon Unix. Unix stipule que le Shebang doit \u00eatre en **premi\u00e8re position** dans le fichier."]}, {"block": 16, "type": "markdown", "linesLength": 1, "startIndex": 31, "lines": ["Ensuite on rajoute au fichier, depuis le terminal, le caract\u00e8re ex\u00e9cutable comme ceci\u00a0:"]}, {"block": 17, "type": "markdown", "linesLength": 4, "startIndex": 32, "lines": ["```python\n", "$ pwd\n", "/le/chemin/jusqu/a/\n", "```"]}, {"block": 18, "type": "markdown", "linesLength": 3, "startIndex": 36, "lines": ["```python\n", "$ chmod +x fibonacci.py\n", "```"]}, {"block": 19, "type": "markdown", "linesLength": 1, "startIndex": 39, "lines": ["\u00c0 partir de l\u00e0, vous pouvez utiliser le fichier `fibonacci.py` comme une commande, sans avoir \u00e0 mentionner `python3`, qui sera invoqu\u00e9 au travers du shebang\u00a0:"]}, {"block": 20, "type": "markdown", "linesLength": 4, "startIndex": 40, "lines": ["```python\n", "$ /le/chemin/jusqu/a/fibonacci.py 20\n", "fibonacci(20) = 10946\n", "```"]}, {"block": 21, "type": "markdown", "linesLength": 1, "startIndex": 44, "lines": ["Et donc vous pouvez aussi le d\u00e9placer dans un r\u00e9pertoire qui est dans votre variable `PATH`; de cette fa\u00e7on vous les rendez ainsi accessible \u00e0 partir n'importe quel r\u00e9pertoire en faisant simplement\u00a0:"]}, {"block": 22, "type": "markdown", "linesLength": 3, "startIndex": 45, "lines": ["```python\n", "$ export PATH=/le/chemin/jusqu/a:$PATH\n", "```"]}, {"block": 23, "type": "markdown", "linesLength": 5, "startIndex": 48, "lines": ["```python\n", "$ cd /tmp\n", "$ fibonacci.py 20\n", "fibonacci(20) = 10946\n", "```"]}, {"block": 24, "type": "markdown", "linesLength": 1, "startIndex": 53, "lines": ["**Remarque&nbsp;:** tout ceci fonctionne tr\u00e8s bien tant que votre point d'entr\u00e9e - ici `fibonacci.py` - n'utilise que des modules standards. Dans le cas o\u00f9 le point d'entr\u00e9e vient avec au moins un module, il est \u00e9galement n\u00e9cessaire d'installer ces modules quelque part, et d'indiquer au point d'entr\u00e9e comment les trouver, nous y reviendrons dans la semaine o\u00f9 nous parlerons des modules."]}]