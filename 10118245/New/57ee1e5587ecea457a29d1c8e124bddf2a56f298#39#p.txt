[{"block": 0, "type": "markdown", "linesLength": 1, "startIndex": 0, "lines": ["<span style=\"float:left;\">Licence CC BY-NC-ND</span><span style=\"float:right;\">Thierry Parmentelat &amp; Arnaud Legout&nbsp;<img src=\"media/inria-25.png\" style=\"display:inline\"></span><br/>"]}, {"block": 1, "type": "markdown", "linesLength": 1, "startIndex": 1, "lines": ["# Dictionnaires"]}, {"block": 2, "type": "markdown", "linesLength": 1, "startIndex": 2, "lines": ["## Compl\u00e9ment - niveau basique"]}, {"block": 3, "type": "markdown", "linesLength": 1, "startIndex": 3, "lines": ["Ce document r\u00e9sume les op\u00e9rations courantes disponibles sur le type `dict`. On rappelle que le type `dict` est un type **mutable**."]}, {"block": 4, "type": "markdown", "linesLength": 1, "startIndex": 4, "lines": ["### Cr\u00e9ation en extension"]}, {"block": 5, "type": "markdown", "linesLength": 1, "startIndex": 5, "lines": ["On l'a vu, la m\u00e9thode la plus directe pour cr\u00e9er un dictionnaire est en extension comme ceci"]}, {"block": 6, "type": "markdown", "linesLength": 1, "startIndex": 6, "lines": ["### Cr\u00e9ation - la fonction dict"]}, {"block": 7, "type": "markdown", "linesLength": 1, "startIndex": 7, "lines": ["Comme pour les fonctions `int` ou `list`, la fonction `dict` est une fonction de construction de dictionnaire - on dit un constructeur - dont on a aussi vu dans la vid\u00e9o l'usage habituel \u00e0 base d'une liste de tuples (`cl\u00e9`, `valeur`)"]}, {"block": 8, "type": "markdown", "linesLength": 1, "startIndex": 8, "lines": ["Remarquons qu'on peut aussi utiliser cette autre forme d'appel \u00e0 `dict` pour un r\u00e9sultat \u00e9quivalent"]}, {"block": 9, "type": "markdown", "linesLength": 1, "startIndex": 9, "lines": ["Remarquez ci-dessus l'absence de quotes autour des cl\u00e9s comme `marc`. Il s'agit d'un cas particulier de passage d'arguments que nous expliciterons plus longuement en fin de semaine 4."]}, {"block": 10, "type": "markdown", "linesLength": 1, "startIndex": 10, "lines": ["### Acc\u00e8s atomique"]}, {"block": 11, "type": "markdown", "linesLength": 1, "startIndex": 11, "lines": ["Pour acc\u00e9der \u00e0 la valeur associ\u00e9e \u00e0 une cl\u00e9, on utilise la notation \u00e0 base de crochets `[]`"]}, {"block": 12, "type": "markdown", "linesLength": 1, "startIndex": 12, "lines": ["Cette forme d'acc\u00e8s ne fonctionne que si la cl\u00e9 est effectivement pr\u00e9sente dans le dictionnaire. Dans le cas contraire une exception `KeyError` est lev\u00e9e. Si vous n'\u00eates pas s\u00fbr si la cl\u00e9 est pr\u00e9sente, vous pouvez utiliser `get` qui accepte une valeur par d\u00e9faut"]}, {"block": 13, "type": "markdown", "linesLength": 1, "startIndex": 13, "lines": ["Le dictionnaire est un type **mutable**, aussi on peut **modifier la valeur** associ\u00e9e \u00e0 une cl\u00e9"]}, {"block": 14, "type": "markdown", "linesLength": 1, "startIndex": 14, "lines": ["Ou encore, exactement de la m\u00eame fa\u00e7on, **ajouter une entr\u00e9e**"]}, {"block": 15, "type": "markdown", "linesLength": 1, "startIndex": 15, "lines": ["Enfin pour **d\u00e9truire une entr\u00e9e**, on peut utiliser l'instruction `del` comme ceci"]}, {"block": 16, "type": "markdown", "linesLength": 1, "startIndex": 16, "lines": ["Pour savoir si une cl\u00e9 est pr\u00e9sente ou non, il est conseill\u00e9 d'utiliser l'op\u00e9rateur d'appartenance `in` comme ceci"]}, {"block": 17, "type": "markdown", "linesLength": 1, "startIndex": 17, "lines": ["Notez qu'avec des versions plus anciennes de python, vous pourrez trouver aussi du code qui utilise la m\u00e9thode `has_key` qui n'est plus recommand\u00e9e"]}, {"block": 18, "type": "markdown", "linesLength": 1, "startIndex": 18, "lines": ["### Acc\u00e8s \u00e0 toutes les entr\u00e9es"]}, {"block": 19, "type": "markdown", "linesLength": 1, "startIndex": 19, "lines": ["La m\u00e9thode la plus fr\u00e9quente pour \"balayer\" tout un dictionnaire est \u00e0 base de la m\u00e9thode `iteritems`; voici par exemple comment on pourrait afficher le contenu "]}, {"block": 20, "type": "markdown", "linesLength": 1, "startIndex": 20, "lines": ["On remarque d'abord que les entr\u00e9es sont list\u00e9es dans le d\u00e9sordre; ceci est d\u00fb \u00e0 l'action de la fonction de hachage, que nous avons vue dans la vid\u00e9o pr\u00e9c\u00e9dente."]}, {"block": 21, "type": "markdown", "linesLength": 1, "startIndex": 21, "lines": ["On remarque aussi que le nom de la m\u00e9thode est un peu \u00e9trange. En fait, il existe aussi une m\u00e9thode `items` qui remplit le m\u00eame r\u00f4le, et dont le nom est plus simple \u00e0 retenir. Cependant, nous vous conseillons d'utiliser syst\u00e9matiquement la m\u00e9thode `iteritems` qui, \u00e9tant impl\u00e9ment\u00e9e comme un it\u00e9rateur et non comme une liste, est pr\u00e9f\u00e9rable d\u00e8s que la taille du dictionnaire devient importante."]}, {"block": 22, "type": "markdown", "linesLength": 1, "startIndex": 22, "lines": ["Nous reviendrons sur la notion d'it\u00e9rateurs en semaine 3, mais voici un premier aper\u00e7u de la diff\u00e9rence entre ces deux m\u00e9thodes"]}, {"block": 23, "type": "markdown", "linesLength": 3, "startIndex": 23, "lines": ["Comme vous l'avez peut-\u00eatre devin\u00e9, la diff\u00e9rence principale entre ces deux approches est que `items` construit **vraiment** un objet liste (qui peut \u00eatre tr\u00e8s grosse, et donc prendre de la place, et du temps \u00e0 calculer), alors que l'it\u00e9rateur rendu par `iteritems` est de taille constante, et se trouve construit tr\u00e8s rapidement.", "", "\u00c0 nouveau ce concept sera approfondi en semaine 3, mais si vous ne devez retenir qu'une seule m\u00e9thode pour \"balayer\" un dictionnaire, retenez **`iteritems`**"]}, {"block": 24, "type": "markdown", "linesLength": 1, "startIndex": 26, "lines": ["On peut obtenir la liste des cl\u00e9s et des valeurs avec"]}, {"block": 25, "type": "markdown", "linesLength": 1, "startIndex": 27, "lines": ["qui sont comme iteritems la version \"it\u00e9rateur\" de `keys` et `values`"]}, {"block": 26, "type": "markdown", "linesLength": 1, "startIndex": 28, "lines": ["## Compl\u00e9ment - niveau interm\u00e9diaire"]}, {"block": 27, "type": "markdown", "linesLength": 1, "startIndex": 29, "lines": ["##### La fonction `len`"]}, {"block": 28, "type": "markdown", "linesLength": 1, "startIndex": 30, "lines": ["On peut comme d'habitude obtenir la taille d'un dictionnaire avec la fonction `len`"]}, {"block": 29, "type": "markdown", "linesLength": 1, "startIndex": 31, "lines": ["##### La m\u00e9thode `update`"]}, {"block": 30, "type": "markdown", "linesLength": 1, "startIndex": 32, "lines": ["On peut \u00e9galement modifier un dictionnaire avec le contenu d'un autre dictionnaire avec la m\u00e9thode `update`"]}, {"block": 31, "type": "markdown", "linesLength": 1, "startIndex": 33, "lines": ["##### La m\u00e9thode `setdefault`"]}, {"block": 32, "type": "markdown", "linesLength": 1, "startIndex": 34, "lines": ["[Cette m\u00e9thode](https://docs.python.org/2/library/stdtypes.html#dict.setdefault) permet, en un seul appel, de retourner la valeur associ\u00e9e \u00e0 une cl\u00e9 et de cr\u00e9er cette cl\u00e9 au besoin, c'est \u00e0 dire si elle n'est pas encore pr\u00e9sente"]}, {"block": 33, "type": "markdown", "linesLength": 1, "startIndex": 35, "lines": ["Notez bien que `setdefault` ne **modifie jamais** la valeur associ\u00e9e \u00e0 une cl\u00e9 d\u00e9j\u00e0 pr\u00e9sente dans le dictionnaire, comme le nom le sugg\u00e8re d'ailleurs."]}, {"block": 34, "type": "markdown", "linesLength": 1, "startIndex": 36, "lines": ["##### Pour en savoir plus sur le type `dict`"]}, {"block": 35, "type": "markdown", "linesLength": 3, "startIndex": 37, "lines": ["Pour une liste exhaustive reportez-vous \u00e0 la page de la documentation python ici", "", "https://docs.python.org/2/library/stdtypes.html#mapping-types-dict"]}, {"block": 36, "type": "markdown", "linesLength": 1, "startIndex": 40, "lines": ["### Dictionnaires avec ordre"]}, {"block": 37, "type": "markdown", "linesLength": 1, "startIndex": 41, "lines": ["Comme cela devrait \u00eatre clair \u00e0 pr\u00e9sent, un dictionnaire est non ordonn\u00e9, dans ce sens qu'il ne se souvient pas de l'ordre dans lequel les \u00e9l\u00e9ments ont \u00e9t\u00e9 ins\u00e9r\u00e9s."]}, {"block": 38, "type": "markdown", "linesLength": 1, "startIndex": 42, "lines": ["Signalons \u00e9galement l'existence dans [le module `collections`](https://docs.python.org/2/library/collections.html) de la classe [`OrderedDict`](https://docs.python.org/2/library/collections.html#collections.OrderedDict), qui est une extension du type `dict` mais qui poss\u00e8de cette bonne propri\u00e9t\u00e9:"]}, {"block": 39, "type": "markdown", "linesLength": 1, "startIndex": 43, "lines": ["## Compl\u00e9ment - niveau avanc\u00e9 "]}, {"block": 40, "type": "markdown", "linesLength": 1, "startIndex": 44, "lines": ["### Vues sur un dictionnaire"]}, {"block": 41, "type": "markdown", "linesLength": 6, "startIndex": 45, "lines": ["Signalons enfin [les m\u00e9thodes](https://docs.python.org/2/library/stdtypes.html#dict.viewitems)", " * `viewitems`", " * `viewkeys`", " * `viewvalues`", "", "qui retournent des objets de type *vue*, qui sont dynamiquement mis \u00e0 jour:"]}, {"block": 42, "type": "markdown", "linesLength": 1, "startIndex": 51, "lines": ["Reportez vous \u00e0 [la section sur les vues de dictionnaires](https://docs.python.org/2/library/stdtypes.html#dictionary-view-objects) pour plus de d\u00e9tails."]}]