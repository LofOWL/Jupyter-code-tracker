[{"block": 0, "type": "markdown", "linesLength": 1, "startIndex": 0, "lines": ["<style>div.title-slide {    width: 100%;    display: flex;    flex-direction: row;            /* default value; can be omitted */    flex-wrap: nowrap;              /* default value; can be omitted */    justify-content: space-between;}</style><div class=\"title-slide\">\n<span style=\"float:left;\">Licence CC BY-NC-ND</span>\n<span>Thierry Parmentelat &amp; Arnaud Legout</span>\n<span><img src=\"media/both-logos-small-alpha.png\" style=\"display:inline\" /></span>\n</div>"]}, {"block": 1, "type": "markdown", "linesLength": 1, "startIndex": 1, "lines": ["# La construction de tuples"]}, {"block": 2, "type": "markdown", "linesLength": 1, "startIndex": 2, "lines": ["## Compl\u00e9ment - niveau interm\u00e9diaire"]}, {"block": 3, "type": "markdown", "linesLength": 1, "startIndex": 3, "lines": ["### Les tuples et la virgule terminale"]}, {"block": 4, "type": "markdown", "linesLength": 1, "startIndex": 4, "lines": ["Comme on l'a vu dans la vid\u00e9o, on peut construire un tuple \u00e0 deux \u00e9l\u00e9ments - un couple - de quatre fa\u00e7ons:"]}, {"block": 5, "type": "code", "linesLength": 8, "startIndex": 5, "lines": ["# sans parenth\u00e8se ni virgule terminale\n", "couple1 = 1, 2\n", "# avec parenth\u00e8ses\n", "couple2 = (1, 2)\n", "# avec virgule terminale\n", "couple3 = 1, 2,\n", "# avec parenth\u00e8se et virgule\n", "couple4 = (1, 2,)"]}, {"block": 6, "type": "code", "linesLength": 2, "startIndex": 13, "lines": ["# toutes ces formes sont \u00e9quivalentes; par exemple\n", "couple1 == couple4"]}, {"block": 7, "type": "markdown", "linesLength": 3, "startIndex": 15, "lines": ["Comme on le voit:\n", "* en r\u00e9alit\u00e9 la **parenth\u00e8se est parfois superflue**; mais il se trouve qu'elle est **largement utilis\u00e9e** pour am\u00e9liorer la lisibilit\u00e9 des programmes; nous verrons aussi plus bas qu'elle est **parfois n\u00e9cessaire** selon l'endroit o\u00f9 le tuple appara\u00eet dans le programme; \n", "* la **derni\u00e8re virgule est optionnelle** aussi, c'est le cas pour les tuples \u00e0 au moins 2 \u00e9l\u00e9ments - nous verrons plus bas le cas des tuples \u00e0 un seul \u00e9l\u00e9ment."]}, {"block": 8, "type": "markdown", "linesLength": 1, "startIndex": 18, "lines": ["### Conseil pour la pr\u00e9sentation sur plusieurs lignes"]}, {"block": 9, "type": "markdown", "linesLength": 1, "startIndex": 19, "lines": ["En g\u00e9n\u00e9ral d'ailleurs, la forme avec parenth\u00e8ses et virgule terminale est plus pratique. Consid\u00e9rez par exemple l'initialisation suivante; on veut cr\u00e9er un tuple qui contient des listes (naturellement un tuple peut contenir n'importe quel objet python), et comme c'est assez long on pr\u00e9f\u00e8re mettre un \u00e9l\u00e9ment du tuple par ligne:"]}, {"block": 10, "type": "code", "linesLength": 4, "startIndex": 20, "lines": ["mon_tuple = ([1, 2, 3],\n", "             [4, 5, 6],\n", "             [7, 8, 9],\n", "            )"]}, {"block": 11, "type": "markdown", "linesLength": 5, "startIndex": 24, "lines": ["L'avantage lorsqu'on choisit cette forme (avec parenth\u00e8ses, et avec virgule terminale), c'est que d'abord il n'est pas n\u00e9cessaire de mettre un backslash \u00e0 la fin de chaque ligne; parce que l'on est \u00e0 l'int\u00e9rieur d'une zone parenth\u00e9s\u00e9e, l'interpr\u00e9teur python \"sait\" que l'instruction n'est pas termin\u00e9e et va se continuer sur la ligne suivante. \n", "\n", "Deuxi\u00e8mement, si on doit ult\u00e9rieurement ajouter ou enlever un \u00e9l\u00e9ment dans le tuple, il suffira d'enlever ou d'ajouter toute une ligne, sans avoir \u00e0 s'occuper des virgules; si on avait choisi de ne pas faire figurer la virgule terminale, alors pour ajouter un item dans le tuple apr\u00e8s le dernier, il ne faut pas oublier d'ajouter une virgule \u00e0 la ligne pr\u00e9c\u00e9dente. Cette simplicit\u00e9 se r\u00e9percute au niveau du gestionnaire de code source, ou les diff\u00e9rences dans le code sont plus faciles \u00e0 visualiser.\n", "\n", "Signalons enfin que ceci n'est pas propre aux tuples. La virgule terminale est \u00e9galement optionnelle pour les listes, ainsi d'ailleurs que pour tous les types python o\u00f9 cela fait du sens, comme les dictionnaires et les ensembles que nous verrons bient\u00f4t. Et dans tous les cas o\u00f9 on opte pour une pr\u00e9sentation multi-lignes, il est conseill\u00e9 de faire figurer une virgule terminale."]}, {"block": 12, "type": "markdown", "linesLength": 1, "startIndex": 29, "lines": ["### Tuples \u00e0 un \u00e9l\u00e9ment"]}, {"block": 13, "type": "markdown", "linesLength": 1, "startIndex": 30, "lines": ["Pour revenir \u00e0 pr\u00e9sent sur le cas des tuples \u00e0 un seul \u00e9l\u00e9ment, c'est un cas particulier; parmi les 4 syntaxes qu'on a vues ci-dessus, on obtiendrait dans ce cas"]}, {"block": 14, "type": "code", "linesLength": 6, "startIndex": 31, "lines": ["# ATTENTION: ces deux premi\u00e8res formes ne construisent pas un tuple !\n", "simple1 = 1\n", "simple2 = (1)\n", "# celles-ci par contre construisent bien un tuple\n", "simple3 = 1,\n", "simple4 = (1,)"]}, {"block": 15, "type": "markdown", "linesLength": 4, "startIndex": 37, "lines": ["* Il est bien \u00e9vident que la premi\u00e8re forme ne cr\u00e9e pas de tuple;\n", "* et en fait la seconde non plus, car python lit ceci comme une expression parenth\u00e9s\u00e9e, avec seulement un entier.\n", "\n", "Et en fait ces deux premi\u00e8res formes cr\u00e9ent un entier simple:"]}, {"block": 16, "type": "code", "linesLength": 1, "startIndex": 41, "lines": ["type(simple2)"]}, {"block": 17, "type": "markdown", "linesLength": 1, "startIndex": 42, "lines": ["Les deux autres formes cr\u00e9ent par contre toutes les deux un tuple \u00e0 un \u00e9l\u00e9ment comme on cherchait \u00e0 le faire:"]}, {"block": 18, "type": "code", "linesLength": 1, "startIndex": 43, "lines": ["type(simple3)"]}, {"block": 19, "type": "code", "linesLength": 1, "startIndex": 44, "lines": ["simple3 == simple4"]}, {"block": 20, "type": "markdown", "linesLength": 1, "startIndex": 45, "lines": ["Pour conclure, disons donc qu'il est conseill\u00e9 de **toujours mentionner une virgule terminale** lorsqu'on construit des tuples."]}, {"block": 21, "type": "markdown", "linesLength": 1, "startIndex": 46, "lines": ["### Parenth\u00e8se parfois obligatoire"]}, {"block": 22, "type": "markdown", "linesLength": 1, "startIndex": 47, "lines": ["Dans certains cas vous vous apercevrez que la parenth\u00e8se est obligatoire. Par exemple on peut \u00e9crire:"]}, {"block": 23, "type": "code", "linesLength": 2, "startIndex": 48, "lines": ["x = (1,)\n", "(1,) == x"]}, {"block": 24, "type": "markdown", "linesLength": 1, "startIndex": 50, "lines": ["Mais si on essaie d'\u00e9crire le m\u00eame test sans les parenth\u00e8ses:"]}, {"block": 25, "type": "code", "linesLength": 2, "startIndex": 51, "lines": ["# ceci provoque une SyntaxError\n", "1, == x"]}, {"block": 26, "type": "markdown", "linesLength": 1, "startIndex": 53, "lines": ["Python l\u00e8ve une erreur de syntaxe; encore une bonne raison pour utiliser les parenth\u00e8ses."]}, {"block": 27, "type": "markdown", "linesLength": 1, "startIndex": 54, "lines": ["### Addition de tuples"]}, {"block": 28, "type": "markdown", "linesLength": 1, "startIndex": 55, "lines": ["Bien que le type tuple soit immuable, il est tout \u00e0 fait l\u00e9gal d'additionner deux tuples, et l'addition va produire un **nouveau** tuple."]}, {"block": 29, "type": "code", "linesLength": 3, "startIndex": 56, "lines": ["tuple1 = (1, 2,)\n", "tuple2 = (3, 4,)\n", "print('addition', tuple1 + tuple2)"]}, {"block": 30, "type": "markdown", "linesLength": 1, "startIndex": 59, "lines": ["Ainsi on peut \u00e9galement utiliser  l'op\u00e9rateur `+=` avec un tuple:"]}, {"block": 31, "type": "code", "linesLength": 3, "startIndex": 60, "lines": ["tuple1 = (1, 2,)\n", "tuple1 += (3, 4,)\n", "print('apres ajout', tuple1)"]}, {"block": 32, "type": "markdown", "linesLength": 1, "startIndex": 63, "lines": ["### Construire des tuples \u00e9labor\u00e9s"]}, {"block": 33, "type": "markdown", "linesLength": 1, "startIndex": 64, "lines": ["Malgr\u00e9 la possibilit\u00e9 de proc\u00e9der par additions successives, la construction d'un tuple peut s'av\u00e9rer fastidieuse. "]}, {"block": 34, "type": "markdown", "linesLength": 1, "startIndex": 65, "lines": ["Une astuce utile consiste \u00e0 penser aux fonctions de conversion, pour construire un tuple \u00e0 partir de - par exemple - une liste. Ainsi on peut faire par exemple ceci:"]}, {"block": 35, "type": "code", "linesLength": 5, "startIndex": 66, "lines": ["# on fabrique une liste pas \u00e0 pas\n", "liste = list(range(10))\n", "liste[9] = 'Inconnu'\n", "del liste [2:5]\n", "liste"]}, {"block": 36, "type": "code", "linesLength": 3, "startIndex": 71, "lines": ["# on convertit le r\u00e9sultat en tuple\n", "mon_tuple = tuple(liste)\n", "mon_tuple"]}, {"block": 37, "type": "markdown", "linesLength": 1, "startIndex": 74, "lines": ["### Digression sur les noms de fonctions pr\u00e9d\u00e9finies"]}, {"block": 38, "type": "markdown", "linesLength": 3, "startIndex": 75, "lines": ["**Remarque**. Vous avez peut-\u00eatre observ\u00e9 que nous avons choisi de ne pas appeler notre tuple simplement `tuple`. C'est une bonne pratique en g\u00e9n\u00e9ral d'\u00e9viter les noms de fonctions pr\u00e9d\u00e9finies par python. \n", "\n", "Ces variables en effet sont des variables \"comme les autres\". Imaginez qu'on ait en fait deux tuples \u00e0 construire comme ci-dessus, voici ce qu'on obtiendrait si on n'avait pas pris cette pr\u00e9caution"]}, {"block": 39, "type": "code", "linesLength": 4, "startIndex": 78, "lines": ["liste = range(10)\n", "# ATTENTION: ceci red\u00e9finit le symbole tuple\n", "tuple = tuple(liste)\n", "tuple"]}, {"block": 40, "type": "code", "linesLength": 5, "startIndex": 82, "lines": ["# si bien que maintenant on ne peut plus faire ceci\n", "# car \u00e0 ce point, tuple ne d\u00e9signe plus le type tuple\n", "# mais l'objet qu'on vient de cr\u00e9er\n", "autre_liste = range(100)\n", "autre_tuple = tuple(autre_liste)"]}, {"block": 41, "type": "markdown", "linesLength": 3, "startIndex": 87, "lines": ["Il y a une erreur parce que nous avons remplac\u00e9 (ligne 2) la valeur de la variable `tuple`, qui au d\u00e9part r\u00e9f\u00e9ren\u00e7ait  le **type** tuple (ou si on pr\u00e9f\u00e8re le fonction de conversion), par un **objet** tuple. Ainsi en ligne 5, lorsqu'on appelle \u00e0 nouveau `tuple`, on essaie d'ex\u00e9cuter un objet qui n'est pas 'appelable' (*not callable* en anglais).\n", "\n", "D'un autre c\u00f4t\u00e9, l'erreur est relativement facile \u00e0 trouver dans ce cas. En cherchant toutes les occurences de `tuple` dans notre propre code on voit assez vite le probl\u00e8me. De plus, je vous rappelle que votre \u00e9diteur de texte **doit** faire de la coloration syntaxique, et que toutes les fonctions built-in (dont `tuple` et `list` font partie) sont color\u00e9es sp\u00e9cifiquement (par exemple, en violet sous IDLE). En pratique, avec un bon \u00e9diteur de texte et un peu d'exp\u00e9rience, cette erreur est tr\u00e8s rare."]}]