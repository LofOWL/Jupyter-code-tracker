[{"block": 0, "type": "heading", "linesLength": 1, "startIndex": 0, "lines": ["Fusionner des donn\u00e9es"]}, {"block": 1, "type": "heading", "linesLength": 1, "startIndex": 1, "lines": ["Exercice - niveau interm\u00e9diaire"]}, {"block": 2, "type": "heading", "linesLength": 1, "startIndex": 2, "lines": ["Contexte"]}, {"block": 3, "type": "markdown", "linesLength": 1, "startIndex": 3, "lines": ["Nous allons commencer \u00e0 utiliser des donn\u00e9es un peu plus r\u00e9alistes. Il s'agit de donn\u00e9es obtenues aupr\u00e8s de [MarineTraffic](https://www.marinetraffic.com) - et l\u00e9g\u00e8rement simplifi\u00e9es pour les besoins de l'exercice. Ce site expose les coordonn\u00e9es g\u00e9ographiques de bateaux observ\u00e9es en mer au travers d'un r\u00e9seau de collecte de type *crowdsourcing*. "]}, {"block": 4, "type": "markdown", "linesLength": 5, "startIndex": 4, "lines": ["De mani\u00e8re \u00e0 optimiser le volume de donn\u00e9es \u00e0 transf\u00e9rer, l'API de MarineTraffic offre deux modes pour obtenir les donn\u00e9es\n", " * **mode \u00e9tendu** : chaque mesure (bateau x position x temps) est accompagn\u00e9e de tous les d\u00e9tails du bateau (`id`, nom, pays de rattachement, etc..)\n", " * **mode abr\u00e9g\u00e9** : chaque mesure est uniquement attach\u00e9e \u00e0 l'`id` du bateau.\n", " \n", "En effet, chaque bateau poss\u00e8de un identifiant unique qui est un entier, que l'on note  `id`."]}, {"block": 5, "type": "heading", "linesLength": 1, "startIndex": 9, "lines": ["Chargement des donn\u00e9es"]}, {"block": 6, "type": "markdown", "linesLength": 3, "startIndex": 10, "lines": ["Nous allons travailler avec une copie locale de ces donn\u00e9es; vous avez d\u00e8s maintenant acc\u00e8s aux deux fichiers\n", " * `data/marine-e1-ext.json` - donn\u00e9es \u00e9tendues\n", " * `data/marine-e1-abb.json` - donn\u00e9es abr\u00e9g\u00e9es"]}, {"block": 7, "type": "markdown", "linesLength": 1, "startIndex": 13, "lines": ["Pour charger ces fichiers qui sont au [format JSON](http://en.wikipedia.org/wiki/JSON), la connaissance intime de ce format n'est pas n\u00e9cessaire, nous allons utiliser le [module `json`](https://docs.python.org/2/library/json.html). Vous pouvez utiliser la cellule qui suit telle quelle, ces d\u00e9tails ne font pas partie de l'exercice parce cette cellule utilise des notions que nous verrons dans les semaines \u00e0 venir."]}, {"block": 8, "type": "heading", "linesLength": 1, "startIndex": 14, "lines": ["Format des donn\u00e9es"]}, {"block": 9, "type": "markdown", "linesLength": 8, "startIndex": 15, "lines": ["Le format de ces donn\u00e9es est relativement simple, il s'agit dans les deux cas d'une liste d'entr\u00e9es - une par bateau.\n", "\n", "Chaque entr\u00e9e \u00e0 son tour est une liste qui contient :\n", "\n", "    mode \u00e9tendu: [id, latitude, longitude, date_heure, nom_bateau, code_pays, ...]\n", "    mode abr\u00e9g\u00e9: [id, latitude, longitude, date_heure]\n", "    \n", "sachant que les entr\u00e9es apr\u00e8s le code pays dans le format \u00e9tendu ne nous int\u00e9ressent pas pour cet exercice."]}, {"block": 10, "type": "markdown", "linesLength": 1, "startIndex": 23, "lines": ["On pr\u00e9cise \u00e9galement que les deux listes `extended` et `abbreviated` poss\u00e8dent exactement **le m\u00eame nombre** d'entr\u00e9es et correspondent **aux m\u00eames bateaux** - mais naturellement \u00e0 des moments diff\u00e9rents."]}, {"block": 11, "type": "heading", "linesLength": 1, "startIndex": 24, "lines": ["But de l'exercice"]}, {"block": 12, "type": "markdown", "linesLength": 7, "startIndex": 25, "lines": ["On vous demande d'\u00e9crire une fonction `merge` qui fasse une consolidation des donn\u00e9es, de fa\u00e7on \u00e0 obtenir en sortie un dictionnaire:\n", "\n", "    id -> [ nom_bateau, code_pays, position_etendu, position_abrege ]\n", "\n", "dans lequel les deux objets `position` sont tous les deux des tuples de la forme\n", "\n", "    (latitude, longitude, date_heure)"]}, {"block": 13, "type": "markdown", "linesLength": 1, "startIndex": 32, "lines": ["Voici par exemple un couple cl\u00e9-valeur dans le r\u00e9sultat attendu. Profitons-en pour d\u00e9couvrir un utilitaire parfois pratique: le [module `pprint` pour pretty-printer](https://docs.python.org/2/library/pprint.html)"]}, {"block": 14, "type": "heading", "linesLength": 1, "startIndex": 33, "lines": ["Votre code"]}, {"block": 15, "type": "heading", "linesLength": 1, "startIndex": 34, "lines": ["Validation"]}]