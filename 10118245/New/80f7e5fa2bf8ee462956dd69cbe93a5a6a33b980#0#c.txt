[{"block": 0, "type": "heading", "linesLength": 1, "startIndex": 0, "lines": ["Affectations par filtrage"]}, {"block": 1, "type": "heading", "linesLength": 1, "startIndex": 1, "lines": ["Un exemple simple"]}, {"block": 2, "type": "markdown", "linesLength": 1, "startIndex": 2, "lines": ["python propose une m\u00e9thode d'affectation puissante et \u00e9l\u00e9gante, dite par filtrage (de l'anglais pattern matching). Commen\u00e7ons par un exemple simple \u00e0 base de tuple. Imaginons qu'on dispose d'un tuple `couple` dont on sait qu'il a deux \u00e9l\u00e9ments"]}, {"block": 3, "type": "code", "linesLength": 1, "startIndex": 3, "lines": ["couple = ( 100, 'spam' )"]}, {"block": 4, "type": "markdown", "linesLength": 1, "startIndex": 4, "lines": ["On souhaite \u00e0 pr\u00e9sent extraire les deux valeurs pour les affecter \u00e0 deux variables. Une solution na\u00efve consiste bien s\u00fbr \u00e0 faire simplement"]}, {"block": 5, "type": "code", "linesLength": 3, "startIndex": 5, "lines": ["gauche = couple[0]\n", "droite = couple[1]\n", "print 'gauche',gauche,'droite',droite"]}, {"block": 6, "type": "markdown", "linesLength": 3, "startIndex": 8, "lines": ["Cela fonctionne naturellement tr\u00e8s bien, mais n'est pas tr\u00e8s pythonique - comme on dit ;)\n", "\n", "On pr\u00e9f\u00e8rera en effet la formulation \u00e9quivalente suivante"]}, {"block": 7, "type": "code", "linesLength": 2, "startIndex": 11, "lines": ["( gauche, droite ) = couple\n", "print 'gauche',gauche,'droite',droite"]}, {"block": 8, "type": "markdown", "linesLength": 3, "startIndex": 13, "lines": ["La logique ici consiste \u00e0 dire, affecter les deux variables de sorte que le tuple `(gauche, droite )` soit \u00e9gal \u00e0 `couple`\n", "\n", "Ceci nous permet d'ailleurs, pour commencer, de voir qu'on aurait donc pu \u00e9crire notre tuple avec les autres syntaxes que nous venons de discuter, par exemple"]}, {"block": 9, "type": "code", "linesLength": 2, "startIndex": 16, "lines": ["gauche, droite, = couple\n", "print 'gauche',gauche,'droite',droite"]}, {"block": 10, "type": "heading", "linesLength": 1, "startIndex": 18, "lines": ["Autres types"]}, {"block": 11, "type": "markdown", "linesLength": 1, "startIndex": 19, "lines": ["Cette technique fonctionne aussi bien avec d'autres types. Par exemple"]}, {"block": 12, "type": "code", "linesLength": 3, "startIndex": 20, "lines": ["liste = [1,2,3]\n", "[ gauche, milieu, droit ] = liste\n", "print 'gauche',gauche,'milieu',milieu,'droit',droit"]}, {"block": 13, "type": "markdown", "linesLength": 1, "startIndex": 23, "lines": ["En fait c'est m\u00eame encore plus flexible que \u00e7a puisqu'on pourrait m\u00eame \u00e9crire"]}, {"block": 14, "type": "code", "linesLength": 3, "startIndex": 24, "lines": ["liste = [1,2,3]\n", "gauche, milieu, droit = liste\n", "print 'gauche',gauche,'milieu',milieu,'droit',droit"]}, {"block": 15, "type": "markdown", "linesLength": 1, "startIndex": 27, "lines": ["Et l\u00e0 c'est presque magique, on a compar\u00e9 un tuple avec une liste !"]}, {"block": 16, "type": "heading", "linesLength": 1, "startIndex": 28, "lines": ["Plusieurs occurrences d'une m\u00eame variable"]}, {"block": 17, "type": "markdown", "linesLength": 1, "startIndex": 29, "lines": ["On peut \u00e9galement utiliser **plusieurs fois** la m\u00eame variable dans la partie gauche de l'affectation. "]}, {"block": 18, "type": "code", "linesLength": 3, "startIndex": 30, "lines": ["entree = [ 1,2,3 ]\n", "a,a,a = entree\n", "print 'a',a"]}, {"block": 19, "type": "markdown", "linesLength": 1, "startIndex": 33, "lines": ["*Attention* toutefois, comme on le voit ici, on n'impose pas que les diff\u00e9rentes occurrences de `a` correspondent \u00e0 des valeurs identiques (en langage savant, on dirait que cela ne permet pas de faire de l'unification). De mani\u00e8re beaucoup plus pragmatique, l'interpr\u00e9teur se contente de faire comme s'il faisait l'affectation plusieurs fois, c'est-\u00e0-dire comme si il faisait "]}, {"block": 20, "type": "code", "linesLength": 1, "startIndex": 34, "lines": ["a=1; a=2; a=3"]}, {"block": 21, "type": "markdown", "linesLength": 1, "startIndex": 35, "lines": ["Cette technique n'est utilis\u00e9e en pratique que pour les parties de la structure dont on n'a que faire dans le contexte. Dans ces cas-l\u00e0 il arrive qu'on utilise le nom de variable `_`, dont on rappelle qu'il est l\u00e9gal, ou tout autre nom comme `ignored` pour manifester le fait que cette partie de la structure ne sera pas utilis\u00e9, par exemple"]}, {"block": 22, "type": "code", "linesLength": 7, "startIndex": 36, "lines": ["entree = [ 1,2,3 ]\n", "\n", "_,milieu,_ = entree\n", "print 'milieu',milieu\n", "\n", "ignored,ignored,right = entree\n", "print 'right',right"]}, {"block": 23, "type": "heading", "linesLength": 1, "startIndex": 43, "lines": ["En profondeur"]}, {"block": 24, "type": "markdown", "linesLength": 1, "startIndex": 44, "lines": ["Le filtrage ne se limite au premier niveau dans les structures, on peut extraire des donn\u00e9es plus profond\u00e9ment imbriqu\u00e9es dans la structure de d\u00e9part, par exemple avec en entr\u00e9e la liste"]}, {"block": 25, "type": "code", "linesLength": 1, "startIndex": 45, "lines": ["structure = ['abc', [(1,2), ([3], 4)], 5]"]}, {"block": 26, "type": "markdown", "linesLength": 1, "startIndex": 46, "lines": ["Si on souhaite extraire la valeur qui se trouve \u00e0 l'emplacement de 3, on peut \u00e9crire"]}, {"block": 27, "type": "code", "linesLength": 2, "startIndex": 47, "lines": ["(_,(_,((foo,),_)),_) = structure\n", "print 'foo',foo"]}, {"block": 28, "type": "markdown", "linesLength": 1, "startIndex": 49, "lines": ["Ou encore, sans doute un peu plus lisible"]}, {"block": 29, "type": "code", "linesLength": 2, "startIndex": 50, "lines": ["(_,(_,([foo],_)),_) = structure\n", "print 'foo',foo"]}, {"block": 30, "type": "markdown", "linesLength": 1, "startIndex": 52, "lines": ["Naturellement on aurait aussi bien pu \u00e9crire ici quelque chose de plus simple comme"]}, {"block": 31, "type": "code", "linesLength": 2, "startIndex": 53, "lines": ["foo = structure[1][1][0][0]\n", "print 'foo',foo"]}, {"block": 32, "type": "markdown", "linesLength": 1, "startIndex": 55, "lines": ["Affaire de go\u00fbt \u00e9videmment.."]}]